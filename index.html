<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShuleAI - Gamified Learning for CBC Curriculum</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        line-height: 1.6;
        color: #333;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header */
      .header {
        background: linear-gradient(135deg, #2e7d4a, #4caf50);
        color: white;
        padding: 1rem 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }

      .logo {
        font-size: 2rem;
        font-weight: bold;
        color: #ffd700;
      }

      .nav-menu {
        display: flex;
        list-style: none;
        gap: 2rem;
        flex-wrap: wrap;
      }

      .nav-menu a {
        color: white;
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        transition: background 0.3s;
      }

      .nav-menu a:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      /* Main Layout */
      .main-layout {
        display: flex;
        gap: 2rem;
        padding: 2rem 0;
        min-height: 80vh;
      }

      /* Sidebar */
      .sidebar {
        width: 300px;
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 10px;
        height: fit-content;
      }

      .filter-section {
        margin-bottom: 2rem;
      }

      .filter-title {
        font-weight: bold;
        margin-bottom: 1rem;
        color: #2e7d4a;
        font-size: 1.1rem;
      }

      .filter-options {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .filter-options label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
        padding: 0.3rem;
        border-radius: 3px;
        transition: background 0.2s;
      }

      .filter-options label:hover {
        background: #e9ecef;
      }

      /* Main Content */
      .main-content {
        flex: 1;
      }

      .hero-section {
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        padding: 3rem 2rem;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 2rem;
        color: white;
      }

      .hero-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      .hero-text {
        font-size: 1.2rem;
        margin-bottom: 2rem;
      }

      .cta-button {
        background: #2e7d4a;
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: 25px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: transform 0.3s;
      }

      .cta-button:hover {
        transform: translateY(-2px);
      }

      /* Games Grid */
      .games-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }

      .games-count {
        color: #666;
        font-size: 1.1rem;
      }

      .sort-controls select {
        padding: 0.5rem 1rem;
        border: 2px solid #ddd;
        border-radius: 5px;
      }

      .games-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
      }

      .game-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .game-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .game-icon {
        width: 60px;
        height: 60px;
        border-radius: 10px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .game-title {
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
        color: #333;
      }

      .game-description {
        color: #666;
        margin-bottom: 1rem;
        font-size: 0.9rem;
      }

      .game-tags {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }

      .tag {
        padding: 0.3rem 0.8rem;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .tag-grade {
        background: #e3f2fd;
        color: #1976d2;
      }

      .tag-subject {
        background: #f3e5f5;
        color: #7b1fa2;
      }

      .tag-cbc {
        background: #e8f5e8;
        color: #2e7d4a;
      }

      .play-button {
        width: 100%;
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
      }

      .play-button:hover {
        background: linear-gradient(135deg, #45a049, #4caf50);
      }

      /* Footer */
      .footer {
        background: #1a1a1a;
        color: white;
        padding: 3rem 0 1rem;
        margin-top: 4rem;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .footer-section h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        font-size: 1.2rem;
      }

      .footer-section ul {
        list-style: none;
      }

      .footer-section ul li {
        margin-bottom: 0.5rem;
      }

      .footer-section ul li a {
        color: #ccc;
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-section ul li a:hover {
        color: #ffd700;
      }

      .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid #444;
        color: #999;
      }

      .partner-logos {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .partner-logo {
        padding: 0.5rem 1rem;
        background: #333;
        border-radius: 5px;
        color: #ffd700;
        font-weight: bold;
      }

      /* Page-specific styles */
      .page-hero {
        background: linear-gradient(135deg, #2e7d4a, #4caf50);
        color: white;
        padding: 3rem 2rem;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 2rem;
      }

      .page-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      .page-description {
        font-size: 1.2rem;
        margin-bottom: 2rem;
      }

      .resources-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
      }

      .resource-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .resource-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .resource-icon {
        width: 60px;
        height: 60px;
        border-radius: 10px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        background: #e3f2fd;
      }

      .resource-title {
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
        color: #333;
      }

      .resource-description {
        color: #666;
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
      }

      .resource-button {
        width: 100%;
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
      }

      .resource-button:hover {
        background: linear-gradient(135deg, #45a049, #4caf50);
      }

      .feature-list {
        margin: 2rem 0;
      }

      .feature-list li {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
        position: relative;
      }

      .feature-list li:before {
        content: "‚úì";
        color: #2e7d4a;
        font-weight: bold;
        position: absolute;
        left: 0;
      }

      /* Subjects and Grade Levels specific styles */
      .subject-grid,
      .grade-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
      }

      .subject-card,
      .grade-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        text-align: center;
      }

      .subject-card:hover,
      .grade-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .subject-icon,
      .grade-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        margin: 0 auto 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        background: #e3f2fd;
      }

      .subject-title,
      .grade-title {
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
        color: #333;
      }

      .subject-stats,
      .grade-stats {
        color: #666;
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
      }

      .subject-button,
      .grade-button {
        width: 100%;
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s;
      }

      .subject-button:hover,
      .grade-button:hover {
        background: linear-gradient(135deg, #45a049, #4caf50);
      }

      .game-preview {
        position: relative;
        height: 120px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-bottom: 1rem;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
      }

      .game-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .game-actions {
        display: flex;
        gap: 0.5rem;
      }

      .games-category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
      }

      .game-featured {
        border: 2px solid #ffd700;
        position: relative;
      }

      /* Payment Modal Styles */
      /* .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .payment-modal.active {
        display: flex;
      }

      .payment-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.3s ease;
      } */
      /* Add these styles to your existing CSS */

      .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 20px;
        box-sizing: border-box;
      }

      .payment-modal.active {
        display: flex;
      }

      .payment-content {
        background: white;
        border-radius: 20px;
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.3s ease;
      }

      .payment-header {
        padding: 30px 30px 20px;
        border-bottom: 1px solid #f0f0f0;
        flex-shrink: 0;
        background: white;
        border-radius: 20px 20px 0 0;
      }

      .payment-body {
        padding: 0 30px 30px;
        overflow-y: auto;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      /* Custom scrollbar for payment body */
      .payment-body::-webkit-scrollbar {
        width: 6px;
      }

      .payment-body::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
      }

      .payment-body::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
      }

      .payment-body::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }

      /* Ensure all sections have proper spacing */
      .subscription-plans {
        display: flex;
        flex-direction: column;
        gap: 15px;
        flex-shrink: 0;
      }

      .payment-form {
        margin-bottom: 0;
        flex-shrink: 0;
      }

      .payment-actions {
        display: flex;
        gap: 15px;
        margin-top: auto;
        flex-shrink: 0;
        position: sticky;
        bottom: 0;
        background: white;
        padding-top: 10px;
      }

      .payment-processing,
      .success-message {
        text-align: center;
        padding: 30px 20px;
        flex-shrink: 0;
      }

      .error-message {
        background: #ffebee;
        color: #c62828;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 0;
        text-align: center;
        display: none;
        flex-shrink: 0;
      }

      /* Plan cards adjustments for better scrolling */
      .plan-card {
        border: 2px solid #e0e0e0;
        border-radius: 15px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        flex-shrink: 0;
      }

      .plan-card:hover {
        border-color: #4ecdc4;
        transform: translateY(-2px);
      }

      .plan-card.selected {
        border-color: #4ecdc4;
        background: #f0f9f8;
      }

      /* Responsive design for mobile */
      @media (max-width: 768px) {
        .payment-modal {
          padding: 10px;
        }

        .payment-content {
          max-height: 95vh;
          max-width: 100%;
        }

        .payment-header {
          padding: 25px 20px 15px;
        }

        .payment-body {
          padding: 0 20px 25px;
          gap: 20px;
        }

        .plan-card {
          padding: 15px;
        }

        .payment-actions {
          flex-direction: column;
          gap: 10px;
        }

        .pay-button,
        .cancel-button {
          flex: 1;
        }
      }

      @media (max-width: 480px) {
        .payment-header {
          padding: 20px 15px 15px;
        }

        .payment-body {
          padding: 0 15px 20px;
          gap: 15px;
        }

        .plan-card {
          padding: 12px;
        }

        .plan-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .plan-price {
          font-size: 1.3rem;
        }
      }

      /* Animation */
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Prevent body scroll when modal is open */
      body.modal-open {
        overflow: hidden;
      }
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .payment-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .payment-title {
        font-size: 2rem;
        color: #2d3436;
        margin-bottom: 10px;
      }

      .payment-subtitle {
        color: #666;
        font-size: 1.1rem;
      }

      .subscription-plans {
        display: grid;
        gap: 15px;
        margin-bottom: 30px;
      }

      .plan-card {
        border: 2px solid #e0e0e0;
        border-radius: 15px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
      }

      .plan-card:hover {
        border-color: #4ecdc4;
        transform: translateY(-2px);
      }

      .plan-card.selected {
        border-color: #4ecdc4;
        background: #f0f9f8;
      }

      .plan-badge {
        position: absolute;
        top: -10px;
        right: 20px;
        background: #ff6b6b;
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .plan-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .plan-name {
        font-size: 1.2rem;
        font-weight: bold;
        color: #2d3436;
      }

      .plan-price {
        font-size: 1.5rem;
        font-weight: bold;
        color: #4ecdc4;
      }

      .plan-period {
        color: #666;
        font-size: 0.9rem;
      }

      .plan-features {
        list-style: none;
        margin-top: 10px;
      }

      .plan-features li {
        padding: 5px 0;
        color: #666;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .plan-features li:before {
        content: "‚úì";
        color: #4ecdc4;
        font-weight: bold;
      }

      .payment-form {
        margin-bottom: 25px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: #2d3436;
      }

      .form-input {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: #4ecdc4;
      }

      .payment-actions {
        display: flex;
        gap: 15px;
      }

      .pay-button {
        flex: 2;
        background: linear-gradient(135deg, #4ecdc4, #44a08d);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .pay-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
      }

      .pay-button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .cancel-button {
        flex: 1;
        background: transparent;
        border: 2px solid #666;
        color: #666;
        padding: 15px;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .cancel-button:hover {
        background: #666;
        color: white;
      }

      .payment-processing {
        text-align: center;
        padding: 20px;
        display: none;
      }

      .processing-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid #e0e0e0;
        border-top: 4px solid #4ecdc4;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .success-message {
        text-align: center;
        padding: 20px;
        display: none;
      }

      .success-icon {
        font-size: 4rem;
        color: #4ecdc4;
        margin-bottom: 20px;
      }

      .error-message {
        background: #ffebee;
        color: #c62828;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
        display: none;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .main-layout {
          flex-direction: column;
        }

        .sidebar {
          width: 100%;
        }

        .hero-title {
          font-size: 2rem;
        }

        .games-header {
          flex-direction: column;
          gap: 1rem;
        }

        .nav-menu {
          gap: 1rem;
        }

        .subject-grid,
        .grade-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">ShuleAI</div>
          <nav>
            <ul class="nav-menu">
              <li><a href="#home">Home</a></li>
              <li><a href="#subjects">Subjects</a></li>
              <li><a href="#grade-levels">Grade Levels</a></li>
              <li><a href="#games">Games</a></li>
              <li><a href="#worksheets">Worksheets</a></li>
              <li><a href="#teachers-hub">Teachers Hub</a></li>
              <li><a href="#parents-hub">Parents Hub</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Home Page Content -->
      <div id="home-page" class="page-content">
        <div class="main-layout">
          <div class="main-content">
            <section class="hero-section">
              <h1 class="hero-title">Gamified Learning Made for CBC</h1>
              <p class="hero-text">
                ChezaAI brings you interactive, fun, and curriculum-aligned
                games designed for Kenyan learners. Master CBC skills through
                play.
              </p>
              <a
                href="games/math_adventure_webgame (3) (1).html"
                style="text-decoration: none"
              >
                <button class="cta-button">Start Playing Now!</button>
              </a>
            </section>

            <div class="games-header">
              <div class="games-count">Showing 48 educational games</div>
              <div class="sort-controls">
                <select>
                  <option>Most Popular</option>
                  <option>Newest</option>
                  <option>Grade Level</option>
                  <option>Subject</option>
                </select>
              </div>
            </div>

            <div class="games-grid">
              <!-- Mathematics Games -->
              <div class="game-card">
                <div class="game-icon" style="background: #e3f2fd">üî¢</div>
                <h3 class="game-title">Hisabati Safari</h3>
                <p class="game-description">
                  Explore addition and subtraction while collecting safari
                  animals in this Kenyan adventure game.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 1-3</span>
                  <span class="tag tag-subject">Mathematics</span>
                  <span class="tag tag-cbc">Numeracy</span>
                </div>

                <button
                  onclick="openPaymentModal('Hisabati Safari')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #f3e5f5">‚úñÔ∏è</div>
                <h3 class="game-title">Multiplication Maasai</h3>
                <p class="game-description">
                  Master times tables with traditional Maasai counting methods
                  and cultural elements.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 3-5</span>
                  <span class="tag tag-subject">Mathematics</span>
                  <span class="tag tag-cbc">Critical Thinking</span>
                </div>
                <button
                  onclick="openPaymentModal('Multiplication Maasai')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #f3e5f5">üó∫Ô∏è</div>
                <h3 class="game-title">Kenya Map Master</h3>
                <p>
                  Explore Kenya's 47 counties, major cities, and geographical
                  features
                </p>

                <div class="game-tags">
                  <span class="tag tag-grade">Grade 3-5</span>
                  <span class="tag tag-subject">Mathematics</span>
                  <span class="tag tag-cbc">Critical Thinking</span>
                </div>
                <button
                  onclick="openPaymentModal('Kenya Map Master')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #e8f5e8">üìê</div>
                <h3 class="game-title">Geometry Girafes</h3>
                <p class="game-description">
                  Learn shapes and angles by building homes for Kenya's wildlife
                  using geometric principles.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 4-6</span>
                  <span class="tag tag-subject">Mathematics</span>
                  <span class="tag tag-cbc">STEM</span>
                </div>
                <div class="game-actions">
                  <button
                    onclick="openPaymentModal('Geometry Giraffes')"
                    class="play-button"
                  >
                    Play Now
                  </button>
                </div>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #fff3e0">ü¶Å</div>
                <h3 class="game-title">Coding Safari</h3>
                <p>Learn programming by coding safari animals!</p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 1-4</span>
                  <span class="tag tag-subject">English</span>
                  <span class="tag tag-cbc">Literacy</span>
                </div>
                <button
                  onclick="openPaymentModal('Coding Safari')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <!-- English Games -->
              <div class="game-card">
                <div class="game-icon" style="background: #fff3e0">üìö</div>
                <h3 class="game-title">English Explorer</h3>
                <p class="game-description">
                  Improve reading comprehension through interactive stories set
                  in Kenyan landscapes.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 1-4</span>
                  <span class="tag tag-subject">English</span>
                  <span class="tag tag-cbc">Literacy</span>
                </div>
                <button
                  onclick="openPaymentModal('English Explorer')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #e1f5fe">‚úèÔ∏è</div>
                <h3 class="game-title">Grammar Safari</h3>
                <p class="game-description">
                  Hunt for correct grammar while exploring Kenya's national
                  parks and wildlife reserves.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">Grade 3-6</span>
                  <span class="tag tag-subject">English</span>
                  <span class="tag tag-cbc">Communication</span>
                </div>

                <button
                  onclick="openPaymentModal('Grammar Safari')"
                  class="play-button"
                >
                  Play Now
                </button>
              </div>

              <div class="game-card">
                <div class="game-icon" style="background: #f9fbe7">üó£Ô∏è</div>
                <h3 class="game-title">Pronunciation Palace</h3>
                <p class="game-description">
                  Practice English pronunciation with voice recognition
                  technology and local contexts.
                </p>
                <div class="game-tags">
                  <span class="tag tag-grade">All Grades</span>
                  <span class="tag tag-subject">English</span>
                  <span class="tag tag-cbc">Digital Literacy</span>
                </div>
                <a href="games/pronunciation_game.html">
                  <button class="play-button">Play Now</button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Games Page Content -->
      <div id="games-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">Educational Games</h1>
          <p class="page-description">
            Discover our collection of interactive, curriculum-aligned games
            designed to make learning fun for Kenyan students
          </p>
        </section>

        <div class="main-layout">
          <div class="main-content">
            <div class="games-header">
              <div class="games-count">Showing 48 educational games</div>
              <div class="sort-controls">
                <select>
                  <option>Most Popular</option>
                  <option>Newest First</option>
                  <option>Alphabetical</option>
                  <option>By Grade Level</option>
                  <option>By Subject</option>
                </select>
              </div>
            </div>

            <!-- Mathematics Games -->
            <div class="games-category-section">
              <div class="category-header">
                <h2 class="category-title">Mathematics Games</h2>
                <div class="category-count">12 games</div>
              </div>
              <div class="games-category-grid">
                <div class="game-card game-featured">
                  <div class="featured-badge">Featured</div>
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
                    "
                  >
                    üî¢
                  </div>
                  <h3 class="game-title">Hisabati Safari</h3>
                  <p class="game-description">
                    Explore addition and subtraction while collecting safari
                    animals in this Kenyan adventure game.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-easy">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 1-3</span>
                    <span class="tag tag-subject">Mathematics</span>
                    <span class="tag tag-cbc">Numeracy</span>
                  </div>
                  <div class="game-actions">
                    <a href="games/safari_math_game (3).html">
                      <button class="play-button">Play Now</button>
                    </a>
                  </div>
                </div>

                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #f3e5f5, #e1bee7);
                    "
                  >
                    ‚úñÔ∏è
                  </div>
                  <h3 class="game-title">Multiplication Maasai</h3>
                  <p class="game-description">
                    Master times tables with traditional Maasai counting methods
                    and cultural elements.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-medium">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 3-5</span>
                    <span class="tag tag-subject">Mathematics</span>
                    <span class="tag tag-cbc">Critical Thinking</span>
                  </div>
                  <div class="game-actions">
                    <a
                      href="games/maasai_multiplication_game (1).html"
                      style="text-decoration: none"
                    >
                      <button class="play-button">Play Now</button>
                    </a>
                  </div>
                </div>

                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
                    "
                  >
                    üìê
                  </div>
                  <h3 class="game-title">Geometry Giraffes</h3>
                  <p class="game-description">
                    Learn shapes and angles by building homes for Kenya's
                    wildlife using geometric principles.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-medium">
                      <
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 4-6</span>
                    <span class="tag tag-subject">Mathematics</span>
                    <span class="tag tag-cbc">STEM</span>
                  </div>
                  <div class="game-actions">
                    <a
                      href="games/geometry_giraffes_game (1) (2).html"
                      style="text-decoration: none"
                    >
                      <button
                        onclick="openPaymentModal('Geometry Giraffes')"
                        class="play-button"
                      >
                        Play Now
                      </button>
                    </a>
                  </div>
                </div>
              </div>
            </div>

            <!-- English Games -->
            <div class="games-category-section">
              <div class="category-header">
                <h2 class="category-title">English Language Games</h2>
                <div class="category-count">10 games</div>
              </div>
              <div class="games-category-grid">
                <div class="game-card game-featured">
                  <div class="featured-badge">Popular</div>
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #fff3e0, #ffe0b2);
                    "
                  >
                    üìö
                  </div>
                  <h3 class="game-title">English Explorer</h3>
                  <p class="game-description">
                    Improve reading comprehension through interactive stories
                    set in Kenyan landscapes.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-easy">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 1-4</span>
                    <span class="tag tag-subject">English</span>
                    <span class="tag tag-cbc">Literacy</span>
                  </div>
                  <div class="game-actions">
                    <a
                      href="games/kids_english_game (1).html"
                      style="text-decoration: none"
                    >
                      <button class="play-button">Play Now</button>
                    </a>
                  </div>
                </div>

                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #e1f5fe, #b3e5fc);
                    "
                  >
                    ‚úèÔ∏è
                  </div>
                  <h3 class="game-title">Grammar Safari</h3>
                  <p class="game-description">
                    Hunt for correct grammar while exploring Kenya's national
                    parks and wildlife reserves.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-medium">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 3-6</span>
                    <span class="tag tag-subject">English</span>
                    <span class="tag tag-cbc">Communication</span>
                  </div>
                  <div class="game-actions">
                    <a href="games/gramer_safari.html">
                      <button class="play-button">Play Now</button>
                    </a>
                  </div>
                </div>

                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #f9fbe7, #f0f4c3);
                    "
                  >
                    üó£Ô∏è
                  </div>
                  <h3 class="game-title">Pronunciation Palace</h3>
                  <p class="game-description">
                    Practice English pronunciation with voice recognition
                    technology and local contexts.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-hard">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">All Grades</span>
                    <span class="tag tag-subject">English</span>
                    <span class="tag tag-cbc">Digital Literacy</span>
                  </div>
                  <div class="game-actions">
                    <a href="games/pronunciation_game.html">
                      <button class="play-button">Play Now</button>
                    </a>
                  </div>
                </div>
              </div>
            </div>

            <!-- Science Games -->
            <div class="games-category-section">
              <div class="category-header">
                <h2 class="category-title">Science & Technology Games</h2>
                <div class="category-count">8 games</div>
              </div>
              <div class="games-category-grid">
                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #e0f2f1, #b2dfdb);
                    "
                  >
                    üî¨
                  </div>
                  <h3 class="game-title">Science Safari Lab</h3>
                  <p class="game-description">
                    Conduct virtual experiments while learning about Kenya's
                    ecosystems and biodiversity.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-medium">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 4-8</span>
                    <span class="tag tag-subject">Science</span>
                    <span class="tag tag-cbc">STEM</span>
                  </div>
                  <div class="game-actions">
                    <button class="play-button">Play Now</button>
                  </div>
                </div>

                <div class="game-card">
                  <div
                    class="game-preview"
                    style="
                      background: linear-gradient(135deg, #f3e5f5, #e1bee7);
                    "
                  >
                    üå±
                  </div>
                  <h3 class="game-title">Plant Growth Challenge</h3>
                  <p class="game-description">
                    Learn about plant biology by growing virtual crops common in
                    Kenyan agriculture.
                  </p>
                  <div class="game-stats">
                    <div class="game-difficulty difficulty-easy">
                      <div class="difficulty-bar">
                        <div class="difficulty-level"></div>
                      </div>
                    </div>
                  </div>
                  <div class="game-tags">
                    <span class="tag tag-grade">Grade 1-6</span>
                    <span class="tag tag-subject">Science</span>
                    <span class="tag tag-cbc">Environmental Ed</span>
                  </div>

                  <div class="game-actions"></div>
                  <a href="games/plantgrowth_game.html">
                    <button class="play-button">Play Now</button>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Subjects Page Content -->
      <div id="subjects-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">CBC Subjects</h1>
          <p class="page-description">
            Explore all subjects in the Competency-Based Curriculum with games,
            worksheets, and resources tailored for each
          </p>
        </section>

        <div class="subject-grid">
          <div class="subject-card">
            <div class="subject-icon" style="background: #e3f2fd">üî¢</div>
            <h3 class="subject-title">Mathematics</h3>
            <p class="subject-stats">24 games ‚Ä¢ 156 worksheets</p>
            <p class="resource-description">
              Develop numeracy, problem-solving, and logical thinking skills
              through interactive games and activities.
            </p>
            <button class="subject-button">Explore Mathematics</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #fff3e0">üìö</div>
            <h3 class="subject-title">English</h3>
            <p class="subject-stats">18 games ‚Ä¢ 142 worksheets</p>
            <p class="resource-description">
              Build literacy, communication, and comprehension skills with
              engaging stories and language games.
            </p>
            <button class="subject-button">Explore English</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #e8f5e8">üá∞üá™</div>
            <h3 class="subject-title">Kiswahili</h3>
            <p class="subject-stats">15 games ‚Ä¢ 98 worksheets</p>
            <p class="resource-description">
              Master Kenya's national language through cultural stories,
              vocabulary games, and conversation practice.
            </p>
            <button class="subject-button">Explore Kiswahili</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #e0f2f1">üî¨</div>
            <h3 class="subject-title">Science & Technology</h3>
            <p class="subject-stats">22 games ‚Ä¢ 124 worksheets</p>
            <p class="resource-description">
              Explore the natural world, conduct virtual experiments, and learn
              about technology applications.
            </p>
            <button class="subject-button">Explore Science</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #fff8e1">üó∫Ô∏è</div>
            <h3 class="subject-title">Social Studies</h3>
            <p class="subject-stats">12 games ‚Ä¢ 87 worksheets</p>
            <p class="resource-description">
              Learn about Kenyan history, geography, government, and citizenship
              through interactive activities.
            </p>
            <button class="subject-button">Explore Social Studies</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #f3e5f5">üé®</div>
            <h3 class="subject-title">Creative Arts</h3>
            <p class="subject-stats">16 games ‚Ä¢ 76 worksheets</p>
            <p class="resource-description">
              Express creativity through music, art, drama, and dance activities
              inspired by Kenyan culture.
            </p>
            <button class="subject-button">Explore Creative Arts</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #f9fbe7">üèÉ</div>
            <h3 class="subject-title">Physical & Health Education</h3>
            <p class="subject-stats">8 games ‚Ä¢ 54 worksheets</p>
            <p class="resource-description">
              Promote physical fitness, health awareness, and sports skills
              through interactive activities.
            </p>
            <button class="subject-button">Explore PHE</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #e1f5fe">üí°</div>
            <h3 class="subject-title">Life Skills Education</h3>
            <p class="subject-stats">14 games ‚Ä¢ 68 worksheets</p>
            <p class="resource-description">
              Develop essential life skills, values, and character education for
              personal and social development.
            </p>
            <button class="subject-button">Explore Life Skills</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #fff3e0">üå±</div>
            <h3 class="subject-title">Agriculture</h3>
            <p class="subject-stats">10 games ‚Ä¢ 42 worksheets</p>
            <p class="resource-description">
              Learn about farming, food production, and environmental
              conservation through practical activities.
            </p>
            <button class="subject-button">Explore Agriculture</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #e8f5e8">üè†</div>
            <h3 class="subject-title">Home Science</h3>
            <p class="subject-stats">9 games ‚Ä¢ 38 worksheets</p>
            <p class="resource-description">
              Develop practical skills for home management, nutrition, and
              family well-being.
            </p>
            <button class="subject-button">Explore Home Science</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #e3f2fd">üíª</div>
            <h3 class="subject-title">Computer Science</h3>
            <p class="subject-stats">17 games ‚Ä¢ 63 worksheets</p>
            <p class="resource-description">
              Build digital literacy, coding skills, and understanding of
              technology in modern society.
            </p>
            <button class="subject-button">Explore Computer Science</button>
          </div>

          <div class="subject-card">
            <div class="subject-icon" style="background: #f3e5f5">üìä</div>
            <h3 class="subject-title">Business Studies</h3>
            <p class="subject-stats">11 games ‚Ä¢ 47 worksheets</p>
            <p class="resource-description">
              Learn about entrepreneurship, finance, and business concepts
              through practical simulations.
            </p>
            <button class="subject-button">Explore Business Studies</button>
          </div>
        </div>
      </div>

      <!-- Grade Levels Page Content -->
      <div id="grade-levels-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">CBC Grade Levels</h1>
          <p class="page-description">
            Find age-appropriate games, worksheets, and resources for each CBC
            grade level from Pre-Primary to Junior Secondary
          </p>
        </section>

        <div class="grade-grid">
          <div class="grade-card">
            <div class="grade-icon" style="background: #e3f2fd">üë∂</div>
            <h3 class="grade-title">Pre-Primary 1 (PP1)</h3>
            <p class="grade-stats">Age 4-5 years ‚Ä¢ 42 games ‚Ä¢ 128 worksheets</p>
            <p class="resource-description">
              Foundational skills development through play-based learning,
              focusing on basic literacy, numeracy, and environmental awareness.
            </p>
            <button class="grade-button">Explore PP1 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #fff3e0">üëß</div>
            <h3 class="grade-title">Pre-Primary 2 (PP2)</h3>
            <p class="grade-stats">Age 5-6 years ‚Ä¢ 56 games ‚Ä¢ 156 worksheets</p>
            <p class="resource-description">
              Enhanced pre-reading, pre-writing, and basic numeracy skills
              preparing children for primary education.
            </p>
            <button class="grade-button">Explore PP2 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #e8f5e8">1Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 1</h3>
            <p class="grade-stats">Age 6-7 years ‚Ä¢ 68 games ‚Ä¢ 184 worksheets</p>
            <p class="resource-description">
              Introduction to formal literacy and numeracy, basic environmental
              activities, and creative expression.
            </p>
            <button class="grade-button">Explore Grade 1 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #e0f2f1">2Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 2</h3>
            <p class="grade-stats">Age 7-8 years ‚Ä¢ 72 games ‚Ä¢ 192 worksheets</p>
            <p class="resource-description">
              Building on literacy and numeracy foundations, introducing basic
              science and social studies concepts.
            </p>
            <button class="grade-button">Explore Grade 2 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #fff8e1">3Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 3</h3>
            <p class="grade-stats">Age 8-9 years ‚Ä¢ 76 games ‚Ä¢ 204 worksheets</p>
            <p class="resource-description">
              Developing reading fluency, mathematical operations, and exploring
              science and social studies in depth.
            </p>
            <button class="grade-button">Explore Grade 3 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #f3e5f5">4Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 4</h3>
            <p class="grade-stats">
              Age 9-10 years ‚Ä¢ 84 games ‚Ä¢ 218 worksheets
            </p>
            <p class="resource-description">
              Upper primary foundation with more complex concepts in all
              subjects and introduction to new learning areas.
            </p>
            <button class="grade-button">Explore Grade 4 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #f9fbe7">5Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 5</h3>
            <p class="grade-stats">
              Age 10-11 years ‚Ä¢ 88 games ‚Ä¢ 226 worksheets
            </p>
            <p class="resource-description">
              Advanced primary education with emphasis on critical thinking,
              problem-solving, and creative expression.
            </p>
            <button class="grade-button">Explore Grade 5 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #e1f5fe">6Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 6</h3>
            <p class="grade-stats">
              Age 11-12 years ‚Ä¢ 92 games ‚Ä¢ 238 worksheets
            </p>
            <p class="resource-description">
              Final year of primary education, preparing learners for transition
              to junior secondary with comprehensive curriculum coverage.
            </p>
            <button class="grade-button">Explore Grade 6 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #fff3e0">7Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 7 (JSS 1)</h3>
            <p class="grade-stats">
              Age 12-13 years ‚Ä¢ 96 games ‚Ä¢ 254 worksheets
            </p>
            <p class="resource-description">
              First year of junior secondary with exploratory curriculum, career
              guidance, and pre-vocational skills.
            </p>
            <button class="grade-button">Explore Grade 7 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #e8f5e8">8Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 8 (JSS 2)</h3>
            <p class="grade-stats">
              Age 13-14 years ‚Ä¢ 98 games ‚Ä¢ 268 worksheets
            </p>
            <p class="resource-description">
              Intermediate junior secondary with deeper exploration of learning
              areas and talent development.
            </p>
            <button class="grade-button">Explore Grade 8 Resources</button>
          </div>

          <div class="grade-card">
            <div class="grade-icon" style="background: #e3f2fd">9Ô∏è‚É£</div>
            <h3 class="grade-title">Grade 9 (JSS 3)</h3>
            <p class="grade-stats">
              Age 14-15 years ‚Ä¢ 102 games ‚Ä¢ 284 worksheets
            </p>
            <p class="resource-description">
              Final year of junior secondary, preparing for senior school
              placement with comprehensive assessment preparation.
            </p>
            <button class="grade-button">Explore Grade 9 Resources</button>
          </div>
        </div>
      </div>

      <!-- Worksheets Page Content -->
      <div id="worksheets-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">Printable Worksheets & Resources</h1>
          <p class="page-description">
            Download and print high-quality CBC-aligned worksheets for all
            subjects and grade levels
          </p>
        </section>

        <div class="resources-grid">
          <div class="resource-card">
            <div class="resource-icon">üìù</div>
            <h3 class="resource-title">Mathematics Worksheets</h3>
            <p class="resource-description">
              Practice problems, exercises, and activities covering all CBC
              mathematics competencies from PP1 to Grade 9.
            </p>
            <button class="resource-button">Browse Worksheets</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üìö</div>
            <h3 class="resource-title">English Language</h3>
            <p class="resource-description">
              Reading comprehension, grammar, vocabulary, and writing exercises
              aligned with CBC English curriculum.
            </p>
            <button class="resource-button">Browse Worksheets</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üá∞üá™</div>
            <h3 class="resource-title">Kiswahili Worksheets</h3>
            <p class="resource-description">
              Language practice, comprehension, and grammar exercises for all
              grade levels in Kiswahili.
            </p>
            <button class="resource-button">Browse Worksheets</button>
          </div>
        </div>
      </div>

      <!-- Teachers Hub Page Content -->
      <div id="teachers-hub-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">Teachers Hub</h1>
          <p class="page-description">
            Resources, tools, and support for educators implementing CBC
            curriculum
          </p>
        </section>

        <div class="resources-grid">
          <div class="resource-card">
            <div class="resource-icon">üìã</div>
            <h3 class="resource-title">Lesson Plans</h3>
            <p class="resource-description">
              Comprehensive CBC lesson plans for all subjects, complete with
              learning objectives and activities.
            </p>
            <button class="resource-button">Access Lesson Plans</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üìä</div>
            <h3 class="resource-title">Assessment Tools</h3>
            <p class="resource-description">
              Rubrics, checklists, and evaluation templates for CBC
              competency-based assessment.
            </p>
            <button class="resource-button">View Assessment Tools</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üéÆ</div>
            <h3 class="resource-title">Game Integration Guide</h3>
            <p class="resource-description">
              Learn how to effectively incorporate ChezaAI games into your
              classroom teaching.
            </p>
            <button class="resource-button">Read Guide</button>
          </div>
        </div>
      </div>

      <!-- Parents Hub Page Content -->
      <div id="parents-hub-page" class="page-content" style="display: none">
        <section class="page-hero">
          <h1 class="page-title">Parents Hub</h1>
          <p class="page-description">
            Support your child's learning journey with CBC-aligned resources and
            guidance
          </p>
        </section>

        <div class="resources-grid">
          <div class="resource-card">
            <div class="resource-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
            <h3 class="resource-title">Understanding CBC</h3>
            <p class="resource-description">
              Learn about the Competency-Based Curriculum and how to support
              your child's learning at home.
            </p>
            <button class="resource-button">Learn More</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üìä</div>
            <h3 class="resource-title">Progress Reports</h3>
            <p class="resource-description">
              View your child's progress across games and activities to
              understand their learning journey.
            </p>
            <button class="resource-button">View Reports</button>
          </div>

          <div class="resource-card">
            <div class="resource-icon">üéØ</div>
            <h3 class="resource-title">Learning Activities</h3>
            <p class="resource-description">
              Find fun, educational activities to do at home that reinforce CBC
              competencies.
            </p>
            <button class="resource-button">Browse Activities</button>
          </div>
        </div>
      </div>
    </main>
    <!-- Payment Modal -->
    <div class="payment-modal" id="paymentModal">
      <div class="payment-content">
        <div class="payment-header">
          <h2 class="payment-title">Subscribe to Play</h2>
          <p class="payment-subtitle" id="selectedGameTitle">
            Choose your subscription plan
          </p>
        </div>

        <div class="payment-body">
          <div class="subscription-plans">
            <div class="plan-card selected" onclick="selectPlan('monthly')">
              <div class="plan-badge">Most Popular</div>
              <div class="plan-header">
                <div class="plan-name">Monthly Access</div>
                <div class="plan-price">KSh 299</div>
              </div>
              <div class="plan-period">30 days full access</div>
              <ul class="plan-features">
                <li>Unlimited game access</li>
                <li>All mathematics games</li>
                <li>Progress tracking</li>
                <li>Priority support</li>
                <li>Parent progress reports</li>
              </ul>
            </div>
          </div>

          <div class="error-message" id="errorMessage">
            Please check your phone number and try again.
          </div>

          <div class="payment-form">
            <div class="form-group">
              <label class="form-label" for="phoneNumber"
                >MPesa Phone Number</label
              >
              <input
                type="tel"
                class="form-input"
                id="phoneNumber"
                placeholder="07XX XXX XXX"
                maxlength="10"
                oninput="formatPhoneNumber(this)"
              />
              <small style="color: #666; font-size: 0.9rem"
                >Enter your MPesa registered phone number</small
              >
            </div>
          </div>

          <div class="payment-actions">
            <button class="cancel-button" onclick="closePaymentModal()">
              Cancel
            </button>
            <button
              class="pay-button"
              id="payButton"
              onclick="processPayment()"
            >
              Pay with MPesa
            </button>
          </div>

          <div class="payment-processing" id="paymentProcessing">
            <div class="processing-spinner"></div>
            <h3>Processing Payment</h3>
            <p>Please check your phone for MPesa prompt...</p>
          </div>

          <div class="success-message" id="successMessage">
            <div class="success-icon">‚úÖ</div>
            <h3>Payment Successful!</h3>
            <p>Your subscription has been activated. Redirecting to game...</p>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>Educational Tools</h3>
            <ul>
              <li><a href="#">Learning Library</a></li>
              <li><a href="#worksheets">Worksheets</a></li>
              <li><a href="#games">Games</a></li>
              <li><a href="#">Interactive Worksheets</a></li>
              <li><a href="#">Worksheet Generator</a></li>
              <li><a href="#">CBC Lesson Plans</a></li>
              <li><a href="#">CBC Resources</a></li>
              <li><a href="#">Assessment Tools</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>Support</h3>
            <ul>
              <li><a href="#">Help Center</a></li>
              <li><a href="#">Pricing</a></li>
              <li><a href="#">ChezaAI For Schools</a></li>
              <li><a href="#">Get a Quote</a></li>
              <li><a href="#">M-Pesa Payment</a></li>
              <li><a href="#">Airtel Money</a></li>
              <li><a href="#">Contact Us</a></li>
              <li><a href="#">CBC Training</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>Connect</h3>
            <ul>
              <li><a href="#">Blog</a></li>
              <li><a href="#teachers-hub">Teacher Community</a></li>
              <li><a href="#parents-hub">Parent Resources</a></li>
              <li><a href="#">Newsletter</a></li>
              <li><a href="#">WhatsApp Support</a></li>
              <li><a href="#">Facebook</a></li>
              <li><a href="#">Twitter</a></li>
              <li><a href="#">YouTube Channel</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>About</h3>
            <ul>
              <li><a href="#">Company</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Press</a></li>
              <li><a href="#">Reviews</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">CBC Compliance</a></li>
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Data Protection</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>Our Network of Schools</h3>
            <ul>
              <li><a href="#">Nairobi Academy</a></li>
              <li><a href="#">Mombasa International School</a></li>
              <li><a href="#">Nakuru Excellence Academy</a></li>
              <li><a href="#">Kisumu Learning Center</a></li>
              <li><a href="#">Eldoret Innovation School</a></li>
              <li><a href="#">Thika Digital Academy</a></li>
              <li><a href="#">Machakos CBC School</a></li>
              <li><a href="#">Join Our Network</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>CBC Partners</h3>
            <ul>
              <li><a href="#">KICD - Kenya Institute</a></li>
              <li><a href="#">Ministry of Education</a></li>
              <li><a href="#">KNEC - Exam Council</a></li>
              <li><a href="#">TSC - Teachers Service</a></li>
              <li><a href="#">UNESCO Kenya</a></li>
              <li><a href="#">British Council</a></li>
              <li><a href="#">Code.org Kenya</a></li>
              <li><a href="#">Microsoft Education</a></li>
            </ul>
          </div>
        </div>

        <div class="partner-logos">
          <div class="partner-logo">Ministry of Education</div>
          <div class="partner-logo">KICD</div>
          <div class="partner-logo">KNEC</div>
          <div class="partner-logo">TSC</div>
          <div class="partner-logo">UNESCO</div>
          <div class="partner-logo">Microsoft</div>
        </div>

        <div class="footer-bottom">
          <p>Copyright ¬© 2025 ChezaAI. All rights reserved.</p>
        </div>
      </div>
      +254703115359
    </footer>

    <script>
      // Simple page routing for demonstration
      document.addEventListener("DOMContentLoaded", function () {
        // Get current page from URL hash or default to home
        let page = window.location.hash.substring(1) || "home";

        // Show the appropriate page
        showPage(page);

        // Update navigation links
        updateNavigation();

        // Listen for hash changes
        window.addEventListener("hashchange", function () {
          page = window.location.hash.substring(1) || "home";
          showPage(page);
        });
      });

      function showPage(page) {
        // Hide all pages
        document.querySelectorAll(".page-content").forEach((el) => {
          el.style.display = "none";
        });

        // Show the requested page
        const pageElement = document.getElementById(`${page}-page`);
        if (pageElement) {
          pageElement.style.display = "block";
        } else {
          // Default to home if page not found
          document.getElementById("home-page").style.display = "block";
        }
      }

      function updateNavigation() {
        // Update navigation links to use hash navigation
        document.querySelectorAll(".nav-menu a").forEach((link) => {
          const href = link.getAttribute("href");
          if (href && href.startsWith("#")) {
            link.addEventListener("click", function (e) {
              e.preventDefault();
              const page = href.substring(1);
              window.location.hash = page;
              showPage(page);
            });
          }
        });
      }
    </script>
    <script>
      let selectedPlan = "monthly";
      let currentUser = null;

      // Sandbox-friendly pricing for testing
      const subscriptionPlans = {
        monthly: {
          amount: 1, // 1 KSh for sandbox testing
          displayAmount: 299, // Show user 299
          name: "Monthly Access",
          period: "30 days full access to all games",
        },
        quarterly: {
          amount: 1, // 1 KSh for sandbox testing
          displayAmount: 799, // Show user 799
          name: "Quarterly Access",
          period: "90 days full access to all games",
        },
        yearly: {
          amount: 1, // 1 KSh for sandbox testing
          displayAmount: 2999, // Show user 2999
          name: "Yearly Access",
          period: "365 days full access to all games",
        },
      };

      // Check user status on page load
      document.addEventListener("DOMContentLoaded", function () {
        checkUserStatus();
      });

      async function checkUserStatus() {
        // Try to get phone number from localStorage or previous session
        const savedPhone = localStorage.getItem("shuleai_user_phone");
        if (savedPhone) {
          try {
            const response = await fetch(
              `http://localhost:3000/api/user-status/${savedPhone}`
            );
            const data = await response.json();

            if (data.success && data.user.isActive) {
              currentUser = data.user;
              updateUIForSubscribedUser();
              console.log("User has active subscription:", currentUser);
            }
          } catch (error) {
            console.log("Error checking user status:", error);
          }
        }
      }

      function updateUIForSubscribedUser() {
        if (currentUser && currentUser.isActive) {
          // Update all "Play Now" buttons to directly open games
          document.querySelectorAll(".play-button").forEach((button) => {
            const gameTitle = button
              .closest(".game-card")
              .querySelector(".game-title").textContent;
            const gamePath = getGamePath(gameTitle);

            if (gamePath) {
              button.innerHTML =
                'Play Now <span style="font-size: 0.8em;">‚úÖ</span>';
              button.onclick = function () {
                window.location.href = gamePath;
              };
            }
          });

          // Update hero section
          const heroButton = document.querySelector(
            ".hero-section .cta-button"
          );
          if (heroButton) {
            heroButton.textContent = "Continue Playing!";
          }

          // Show user status in header
          showUserStatusInHeader();
        }
      }

      function showUserStatusInHeader() {
        // Add user status to header
        const headerContent = document.querySelector(".header-content");
        if (headerContent && !document.querySelector(".user-status")) {
          const userStatus = document.createElement("div");
          userStatus.className = "user-status";
          userStatus.innerHTML = `
            <div style="background: #4caf50; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">
                ‚úÖ Subscribed ‚Ä¢ ${currentUser.daysRemaining} days left
            </div>
        `;
          headerContent.appendChild(userStatus);
        }
      }

      function openPaymentModal() {
        document.getElementById("selectedGameTitle").textContent =
          "Subscribe to ShuleAI";
        document.getElementById("paymentModal").classList.add("active");
        resetPaymentUI();
        updatePlanDisplay();
      }

      function closePaymentModal() {
        document.getElementById("paymentModal").classList.remove("active");
        resetPaymentUI();
      }

      function selectPlan(plan) {
        selectedPlan = plan;
        document.querySelectorAll(".plan-card").forEach((card) => {
          card.classList.remove("selected");
        });
        event.currentTarget.classList.add("selected");
        updatePlanDisplay();
      }

      function updatePlanDisplay() {
        const plan = subscriptionPlans[selectedPlan];
        if (plan) {
          console.log(
            `Selected plan: ${plan.name}, Display: KSh ${plan.displayAmount}, Charge: KSh ${plan.amount}`
          );
        }
      }
      function formatPhoneNumber(input) {
        // Remove all non-digit characters
        let phone = input.value.replace(/\D/g, "");

        // Ensure it starts with 254 for MPesa
        if (phone.startsWith("0")) {
          phone = "254" + phone.substring(1);
        } else if (phone.startsWith("7")) {
          phone = "254" + phone;
        }

        // Limit to 12 digits (254XXXXXXXXX)
        phone = phone.substring(0, 12);
        input.value = phone;
      }

      function validatePhoneNumber(phone) {
        // MPesa numbers should be 12 digits starting with 254
        const phoneRegex = /^254[17]\d{8}$/;
        return phoneRegex.test(phone);
      }

      function resetPaymentUI() {
        document.getElementById("phoneNumber").value = "";
        document.getElementById("errorMessage").style.display = "none";
        document.getElementById("paymentProcessing").style.display = "none";
        document.getElementById("successMessage").style.display = "none";
        document.getElementById("payButton").disabled = false;
        document.getElementById("payButton").textContent = "Pay with MPesa";
        selectedPlan = "monthly";
        updatePlanDisplay();
      }

      async function processPayment() {
        const phoneNumber = document.getElementById("phoneNumber").value;
        const payButton = document.getElementById("payButton");

        if (!validatePhoneNumber(phoneNumber)) {
          document.getElementById("errorMessage").style.display = "block";
          return;
        }

        // Save phone number for future reference
        localStorage.setItem("shuleai_user_phone", phoneNumber);

        payButton.disabled = true;
        payButton.textContent = "Processing...";
        document.getElementById("errorMessage").style.display = "none";
        document.getElementById("paymentProcessing").style.display = "block";

        const plan = subscriptionPlans[selectedPlan];
        const amount = plan.amount; // Use sandbox amount (1 KSh)

        try {
          const response = await fetch(
            "http://localhost:3000/api/initiate-payment",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                phoneNumber: phoneNumber,
                amount: amount,
                planType: selectedPlan,
                accountReference: "WEBSITE_SUBSCRIPTION",
                transactionDesc: `ShuleAI Website Subscription - ${plan.name}`,
              }),
            }
          );

          const data = await response.json();

          if (data.success) {
            document.getElementById("paymentProcessing").innerHTML = `
                <div class="processing-spinner"></div>
                <h3>Check Your Phone</h3>
                <p>MPesa prompt for <strong>KSh ${amount}</strong> sent to ${phoneNumber}.</p>
                <p><small><strong>Note:</strong> Using test amount for sandbox. Real price: KSh ${plan.displayAmount}</small></p>
                <p><small>Check your phone and enter your MPesa PIN to complete payment.</small></p>
                <p id="paymentStatusText" style="margin-top: 10px; font-weight: bold; color: #2e7d4a;"></p>
            `;

            await waitForPaymentCompletion(data.checkoutRequestID);
          } else {
            throw new Error(data.message || "Payment initiation failed");
          }
        } catch (error) {
          console.error("Payment error:", error);
          showPaymentError(error.message);
        }
      }

      function waitForPaymentCompletion(checkoutRequestID) {
        return new Promise((resolve, reject) => {
          let attempts = 0;
          const maxAttempts = 180;

          const checkInterval = setInterval(async () => {
            attempts++;

            try {
              const response = await fetch(
                `http://localhost:3000/api/payment-status/${checkoutRequestID}`
              );
              const data = await response.json();

              const statusText = document.getElementById("paymentStatusText");

              if (data.success && data.payment) {
                if (data.payment.status === "completed") {
                  statusText.textContent =
                    "‚úÖ Payment successful! Activating subscription...";
                  clearInterval(checkInterval);

                  // Refresh user status after payment
                  setTimeout(async () => {
                    await checkUserStatus();
                    showPaymentSuccess();
                  }, 2000);

                  resolve();
                } else if (data.payment.status === "failed") {
                  statusText.textContent =
                    "‚ùå Payment failed. Please try again.";
                  clearInterval(checkInterval);
                  setTimeout(() => {
                    showPaymentError("Payment failed. Please try again.");
                  }, 2000);
                  reject();
                } else {
                  statusText.textContent = `‚è≥ Waiting for payment confirmation... (${attempts}s)`;
                }
              }

              if (attempts >= maxAttempts) {
                clearInterval(checkInterval);
                showPaymentError(
                  "Payment timeout. Please check if you completed the MPesa prompt."
                );
                reject();
              }
            } catch (error) {
              console.error("Status check error:", error);
              const statusText = document.getElementById("paymentStatusText");
              statusText.textContent = `üîß Checking payment status... (${attempts}s)`;
            }
          }, 1000);
        });
      }

      function showPaymentSuccess() {
        document.getElementById("paymentProcessing").style.display = "none";
        document.getElementById("successMessage").style.display = "block";

        const plan = subscriptionPlans[selectedPlan];

        document.getElementById("successMessage").innerHTML = `
        <div class="success-icon">‚úÖ</div>
        <h3>Subscription Activated!</h3>
        <p>Your <strong>${plan.name}</strong> to ShuleAI has been activated.</p>
        <p><strong>Access:</strong> Full website access - all games unlocked</p>
        <p><strong>Duration:</strong> ${plan.period}</p>
        <p><small>This is a test transaction. In production, you would be charged KSh ${plan.displayAmount}.</small></p>
        <button onclick="closePaymentModalAndRefresh()" style="margin-top: 15px; padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Start Playing!
        </button>
    `;
      }

      function closePaymentModalAndRefresh() {
        closePaymentModal();
        location.reload(); // Refresh to update UI with subscription status
      }

      function showPaymentError(message) {
        document.getElementById("paymentProcessing").style.display = "none";
        const errorElement = document.getElementById("errorMessage");
        errorElement.textContent = message;
        errorElement.style.display = "block";
        document.getElementById("payButton").disabled = false;
        document.getElementById("payButton").textContent = "Pay with MPesa";
      }

      // Game path mapping
      function getGamePath(gameTitle) {
        const gameMap = {
          "Geometry Giraffes": "games/geometry_giraffes_game (1) (2).html",
          "Grammar Safari": "games/gramer_safari.html",
          "Plant Growth Challenge": "games/plantgrowth_game.html",
          "Hisabati Safari": "games/safari_math_game (3).html",
          "Multiplication Maasai": "games/maasai_multiplication_game (1).html",
          "Kenya Map Master": "games/kenya_map_master.html",
          "Coding Safari": "games/coding_safari.html",
          "English Explorer": "games/kids_english_game.html",
        };
        return gameMap[gameTitle];
      }

      // Update all "Play Now" buttons to check subscription
      document.querySelectorAll(".play-button").forEach((button) => {
        const originalOnClick = button.getAttribute("onclick");
        if (originalOnClick && originalOnClick.includes("openPaymentModal")) {
          // Extract game title from onclick
          const gameTitleMatch = originalOnClick.match(
            /openPaymentModal\('([^']+)'\)/
          );
          if (gameTitleMatch) {
            const gameTitle = gameTitleMatch[1];
            button.onclick = function () {
              if (currentUser && currentUser.isActive) {
                // User has subscription - go directly to game
                const gamePath = getGamePath(gameTitle);
                if (gamePath) {
                  window.location.href = gamePath;
                }
              } else {
                // User needs to subscribe - open payment modal
                openPaymentModal();
              }
            };
          }
        }
      });

      // Close modal when clicking outside
      document
        .getElementById("paymentModal")
        .addEventListener("click", function (event) {
          if (event.target === this) {
            closePaymentModal();
          }
        });

      // Keyboard support
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closePaymentModal();
        }
      });
    </script>
    <!-- <script>
      let selectedPlan = "monthly";
      let selectedGame = "";

      // Map game titles to game file paths
      const gameMap = {
        "Geometry Giraffes": "games/geometry_giraffes_game (1) (2).html",
        "Grammar Safari": "games/gramer_safari.html",
        "Plant Growth Challenge": "games/plantgrowth_game.html",
        "Hisabati Safari": "games/safari_math_game (3).html",
        "Multiplication Maasai": "games/maasai_multiplication_game (1).html",
        "Kenya Map Master": "games/kenya_map_master.html",
        "Coding Safari": "games/coding_safari.html",
        "English Explorer": "games/kids_english_game.html",
      };

      // Subscription plans with actual pricing
      const subscriptionPlans = {
        monthly: {
          amount: 100,
          name: "Monthly Access",
          period: "30 days full access",
        },
        quarterly: {
          amount: 799,
          name: "Quarterly Access",
          period: "90 days full access",
        },
        yearly: {
          amount: 2999,
          name: "Yearly Access",
          period: "365 days full access",
        },
      };

      function openPaymentModal(gameTitle) {
        selectedGame = gameTitle;
        document.getElementById(
          "selectedGameTitle"
        ).textContent = `Subscribe to ${gameTitle}`;
        document.getElementById("paymentModal").classList.add("active");
        resetPaymentUI();
        updatePlanDisplay(); // Update plan display when modal opens
      }

      function closePaymentModal() {
        document.getElementById("paymentModal").classList.remove("active");
        resetPaymentUI();
      }

      function selectPlan(plan) {
        selectedPlan = plan;

        // Update UI
        document.querySelectorAll(".plan-card").forEach((card) => {
          card.classList.remove("selected");
        });

        event.currentTarget.classList.add("selected");

        // Update the plan display
        updatePlanDisplay();
      }

      function updatePlanDisplay() {
        const plan = subscriptionPlans[selectedPlan];
        if (plan) {
          // You can update any UI elements here if needed
          console.log(
            `Selected plan: ${plan.name}, Amount: KSh ${plan.amount}`
          );
        }
      }

      function formatPhoneNumber(input) {
        // Remove all non-digit characters
        let phone = input.value.replace(/\D/g, "");

        // Ensure it starts with 254 for MPesa
        if (phone.startsWith("0")) {
          phone = "254" + phone.substring(1);
        } else if (phone.startsWith("7")) {
          phone = "254" + phone;
        }

        // Limit to 12 digits (254XXXXXXXXX)
        phone = phone.substring(0, 12);
        input.value = phone;
      }

      function validatePhoneNumber(phone) {
        // MPesa numbers should be 12 digits starting with 254
        const phoneRegex = /^254[17]\d{8}$/;
        return phoneRegex.test(phone);
      }

      function resetPaymentUI() {
        document.getElementById("phoneNumber").value = "";
        document.getElementById("errorMessage").style.display = "none";
        document.getElementById("paymentProcessing").style.display = "none";
        document.getElementById("successMessage").style.display = "none";
        document.getElementById("payButton").disabled = false;
        document.getElementById("payButton").textContent = "Pay with MPesa";
        // Reset to monthly plan
        selectedPlan = "monthly";
        updatePlanDisplay();
      }

      async function processPayment() {
        const phoneNumber = document.getElementById("phoneNumber").value;
        const payButton = document.getElementById("payButton");

        // Validate phone number
        if (!validatePhoneNumber(phoneNumber)) {
          document.getElementById("errorMessage").style.display = "block";
          return;
        }

        // Show processing state
        payButton.disabled = true;
        payButton.textContent = "Processing...";
        document.getElementById("errorMessage").style.display = "none";
        document.getElementById("paymentProcessing").style.display = "block";

        // Get actual amount based on selected plan
        const plan = subscriptionPlans[selectedPlan];
        const amount = plan.amount;

        try {
          const response = await fetch(
            "http://localhost:3000/api/initiate-payment",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                phoneNumber: phoneNumber,
                amount: amount,
                accountReference: selectedGame,
                transactionDesc: `Subscription for ${selectedGame} - ${plan.name}`,
                planType: selectedPlan, // Send plan type to backend
              }),
            }
          );

          const data = await response.json();

          if (data.success) {
            // Payment initiated successfully - wait for completion
            document.getElementById("paymentProcessing").innerHTML = `
          <div class="processing-spinner"></div>
          <h3>Check Your Phone</h3>
          <p>MPesa prompt for <strong>KSh ${amount}</strong> sent to ${phoneNumber}.</p>
          <p><small>Check your phone and enter your MPesa PIN to complete payment.</small></p>
          <p id="paymentStatusText" style="margin-top: 10px; font-weight: bold; color: #2e7d4a;"></p>
      `;

            // Wait for payment confirmation
            await waitForPaymentCompletion(data.checkoutRequestID);
          } else {
            throw new Error(data.message || "Payment initiation failed");
          }
        } catch (error) {
          console.error("Payment error:", error);
          showPaymentError(error.message);
        }
      }

      function waitForPaymentCompletion(checkoutRequestID) {
        return new Promise((resolve, reject) => {
          let attempts = 0;
          const maxAttempts = 180; // Wait up to 3 minutes

          const checkInterval = setInterval(async () => {
            attempts++;

            try {
              const response = await fetch(
                `http://localhost:3000/api/payment-status/${checkoutRequestID}`
              );
              const data = await response.json();

              const statusText = document.getElementById("paymentStatusText");

              if (data.success && data.payment) {
                if (data.payment.status === "completed") {
                  // Payment successful
                  statusText.textContent =
                    "‚úÖ Payment successful! Redirecting to game...";
                  clearInterval(checkInterval);
                  setTimeout(() => {
                    showPaymentSuccess();
                  }, 2000);
                  resolve();
                } else if (data.payment.status === "failed") {
                  // Payment failed
                  statusText.textContent =
                    "‚ùå Payment failed. Please try again.";
                  clearInterval(checkInterval);
                  setTimeout(() => {
                    showPaymentError("Payment failed. Please try again.");
                  }, 2000);
                  reject();
                } else {
                  // Still pending
                  statusText.textContent = `‚è≥ Waiting for payment confirmation... (${attempts}s)`;
                }
              }

              // If max attempts reached
              if (attempts >= maxAttempts) {
                clearInterval(checkInterval);
                showPaymentError(
                  "Payment timeout. Please check if you completed the MPesa prompt."
                );
                reject();
              }
            } catch (error) {
              console.error("Status check error:", error);
              const statusText = document.getElementById("paymentStatusText");
              statusText.textContent = `üîß Checking payment status... (${attempts}s)`;
            }
          }, 1000); // Check every second
        });
      }

      function showPaymentSuccess() {
        document.getElementById("paymentProcessing").style.display = "none";
        document.getElementById("successMessage").style.display = "block";

        const plan = subscriptionPlans[selectedPlan];

        // Update success message with plan details
        document.getElementById("successMessage").innerHTML = `
    <div class="success-icon">‚úÖ</div>
    <h3>Payment Successful!</h3>
    <p>Your <strong>${plan.name}</strong> for <strong>${selectedGame}</strong> has been activated.</p>
    <p><strong>Amount:</strong> KSh ${plan.amount}</p>
    <p><strong>Access:</strong> ${plan.period}</p>
    <p>Redirecting to game...</p>
  `;

        // Redirect to game after 3 seconds
        setTimeout(() => {
          const gamePath = gameMap[selectedGame];
          if (gamePath) {
            window.location.href = gamePath;
          } else {
            alert(
              `Payment successful! Game access granted for ${selectedGame}`
            );
            closePaymentModal();
          }
        }, 3000);
      }

      function showPaymentError(message) {
        document.getElementById("paymentProcessing").style.display = "none";
        const errorElement = document.getElementById("errorMessage");
        errorElement.textContent = message;
        errorElement.style.display = "block";

        document.getElementById("payButton").disabled = false;
        document.getElementById("payButton").textContent = "Pay with MPesa";
      }

      // Close modal when clicking outside
      document
        .getElementById("paymentModal")
        .addEventListener("click", function (event) {
          if (event.target === this) {
            closePaymentModal();
          }
        });

      // Keyboard support
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closePaymentModal();
        }
      });
    </script> -->
  </body>
</html>
<!-- async function processPayment() {
    const phoneNumber = document.getElementById("phoneNumber").value;
    const payButton = document.getElementById("payButton");

    // Validate phone number
    if (!validatePhoneNumber(phoneNumber)) {
        document.getElementById("errorMessage").style.display = "block";
        return;
    }

    // Show processing state
    payButton.disabled = true;
    payButton.textContent = "Processing...";
    document.getElementById("errorMessage").style.display = "none";
    document.getElementById("paymentProcessing").style.display = "block";

    // Determine amount based on selected plan
    const amount = selectedPlan === "monthly" ? 299 : 2500;

    try {
        // Call your backend to initiate Daraja payment
        const response = await fetch('/api/initiate-payment', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                phoneNumber: phoneNumber,
                amount: amount,
                accountReference: selectedGame,
                transactionDesc: `Subscription for ${selectedGame} - ${selectedPlan} plan`
            })
        });

        const data = await response.json();

        if (data.success) {
            // Payment initiated successfully - wait for confirmation
            await waitForPaymentConfirmation(data.checkoutRequestID);
        } else {
            throw new Error(data.message || 'Payment initiation failed');
        }
    } catch (error) {
        console.error('Payment error:', error);
        showPaymentError(error.message);
    }
}

function waitForPaymentConfirmation(checkoutRequestID) {
    return new Promise((resolve, reject) => {
        let attempts = 0;
        const maxAttempts = 30; // Wait for 30 seconds (30 * 1 second intervals)
        
        const checkInterval = setInterval(async () => {
            attempts++;
            
            try {
                const response = await fetch('/api/check-payment-status', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        checkoutRequestID: checkoutRequestID
                    })
                });
                
                const statusData = await response.json();
                
                if (statusData.ResultCode === 0) {
                    // Payment successful
                    clearInterval(checkInterval);
                    showPaymentSuccess();
                    resolve();
                } else if (statusData.ResultCode !== "1032") { // 1032 means still processing
                    // Payment failed or was cancelled
                    clearInterval(checkInterval);
                    showPaymentError(statusData.ResultDesc || 'Payment failed');
                    reject(new Error('Payment failed'));
                }
                
                // If max attempts reached and still processing
                if (attempts >= maxAttempts) {
                    clearInterval(checkInterval);
                    showPaymentError('Payment timeout. Please check your phone for the MPesa prompt.');
                    reject(new Error('Payment timeout'));
                }
            } catch (error) {
                console.error('Status check error:', error);
                // Don't stop on network errors, just try again
            }
        }, 1000); // Check every second
    });
}

function showPaymentError(message) {
    document.getElementById("paymentProcessing").style.display = "none";
    const errorElement = document.getElementById("errorMessage");
    errorElement.textContent = message || "Payment failed. Please try again.";
    errorElement.style.display = "block";

    document.getElementById("payButton").disabled = false;
    document.getElementById("payButton").textContent = "Pay with MPesa";
} -->

<!-- function validatePhoneNumber(phone) {
    // Remove all non-digit characters
    const cleanPhone = phone.replace(/\D/g, '');
    
    // Check if it's a valid Kenyan phone number
    // Valid formats: 2547XXXXXXXX, 2541XXXXXXXX, 07XXXXXXXX, 01XXXXXXXX
    const phoneRegex = /^(?:254|\+254|0)?[17]\d{8}$/;
    
    if (!phoneRegex.test(cleanPhone)) {
        return false;
    }
    
    // Convert to Daraja format (254XXXXXXXXX)
    let formattedPhone = cleanPhone;
    if (formattedPhone.startsWith('0')) {
        formattedPhone = '254' + formattedPhone.substring(1);
    } else if (formattedPhone.startsWith('+254')) {
        formattedPhone = formattedPhone.substring(1);
    } else if (formattedPhone.startsWith('254') && formattedPhone.length === 12) {
        // Already in correct format
    } else {
        return false;
    }
    
    return formattedPhone.length === 12 && formattedPhone.startsWith('254');
}

function formatPhoneNumber(input) {
    let phone = input.value.replace(/\D/g, '');
    
    // Auto-format as user types
    if (phone.startsWith('254')) {
        // Keep as is for display, but show formatted
        if (phone.length > 3) {
            input.value = phone.replace(/(254)(\d{3})(\d{3})(\d{3})/, '$1 $2 $3 $4');
        }
    } else if (phone.startsWith('0')) {
        if (phone.length <= 4) {
            input.value = phone.replace(/(\d{3})/, '$1 ');
        } else if (phone.length <= 7) {
            input.value = phone.replace(/(\d{3})(\d{3})/, '$1 $2 ');
        } else {
            input.value = phone.replace(/(\d{3})(\d{3})(\d{3})/, '$1 $2 $3');
        }
    }
} -->
